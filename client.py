import socket\nimport threading\nimport sys\n\nHOST = '127.0.0.1' # Adresa serveru\nPORT = 65432        # Port serveru\n\nclient = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n\ntry:\n    client.connect((HOST, PORT))\nexcept ConnectionRefusedError:\n    print("Nelze se připojit k serveru. Ujistěte se, že server běží a je dostupný.")\n    sys.exit(1)\nexcept Exception as e:\n    print(f"Došlo k chybě při připojování: {e}")\n    sys.exit(1)\n\n\nnickname = input("Zvolte si přezdívku: ")\n\ndef receive():\n    """Stará se o příjem zpráv ze serveru."""\n    while True:\n        try:\n            message = client.recv(1024).decode('utf-8')\n            if message == 'NICK':\n                client.send(nickname.encode('utf-8'))\n            else:\n                print(message)\n        except:\n            # Zpracování odpojení klienta (např. server spadl nebo klienta vyhodil)\n            print("Nastala chyba nebo jste byli odpojeni ze serveru!")\n            client.close()\n            break\n\ndef write():\n    """Stará se o odesílání zpráv na server."""\n    while True:\n        try:\n            message_content = input('')\n            if message_content.lower() == '/quit': # Jednoduchý příkaz pro odpojení\n                print("Odpojuji se...")\n                client.close()\n                break\n            message = f"{nickname}: {message_content}"\n            client.send(message.encode('utf-8'))\n        except EOFError: # Pro ošetření Ctrl+D (na Linuxu/macOS) nebo Ctrl+Z (na Windows) v konzoli\n            print("Odpojuji se... (vstup ukončen)")\n            client.close()\n            break\n        except Exception as e:\n            print(f"Chyba při odesílání nebo ztráta spojení: {e}")\n            client.close()\n            break\n\n# Spuštění vláken pro příjem a odesílání zpráv\nreceive_thread = threading.Thread(target=receive)\nreceive_thread.start()\n\nwrite_thread = threading.Thread(target=write)\nwrite_thread.start()\n\n# Čekání na dokončení vlákna pro odesílání, aby hlavní vlákno neskončilo dříve\nwrite_thread.join()\nprint("Klient se odpojil.")\n